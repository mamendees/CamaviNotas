
def test_notas_by_tia(app, client):
    res = client.post('/notas/getByTia',json={'tiaAluno':'31933130'})
    assert res.status_code == 200
    expected = '"[{\\"_id\\": {\\"$oid\\": \\"613cdc9e1d90c02257c7c163\\"}, \\"tiaAluno\\": \\"31933130\\", \\"notaA\\": 8, \\"notaB\\": 5, \\"notaC\\": 6, \\"notaD\\": 7, \\"textoContestacao\\": \\"Nota B foi apresentada na vista como 6, favor corrigir\\", \\"materiaId\\": \\"613cd9c81d90c02257c7c160\\", \\"status\\": \\"R\\", \\"materia\\": {\\"_id\\": {\\"$oid\\": \\"613cd9c81d90c02257c7c160\\"}, \\"nomeMateria\\": \\"Laboratorio de Engenharia de Sofware 06N11\\", \\"professores\\": [{\\"$oid\\": \\"613ccbbe1d90c02257c7c15e\\"}]}}, {\\"_id\\": {\\"$oid\\": \\"613d37701d90c02257c7c165\\"}, \\"tiaAluno\\": \\"31933130\\", \\"notaA\\": 8, \\"notaB\\": 5, \\"notaC\\": 6, \\"notaD\\": 6, \\"textoContestacao\\": \\"\\", \\"materiaId\\": \\"613d375c1d90c02257c7c164\\", \\"status\\": \\"A\\", \\"materia\\": {\\"_id\\": {\\"$oid\\": \\"613d375c1d90c02257c7c164\\"}, \\"nomeMateria\\": \\"Teoria dos Grafos 06N\\", \\"professores\\": [\\"613d6dac1d90c02257c7c169\\"]}}, {\\"_id\\": {\\"$oid\\": \\"613d73381d90c02257c7c17c\\"}, \\"tiaAluno\\": \\"31933130\\", \\"notaA\\": 6, \\"notaB\\": 5, \\"notaC\\": 6, \\"notaD\\": 6, \\"textoContestacao\\": \\"\\", \\"materiaId\\": \\"613d6cfb1d90c02257c7c168\\", \\"status\\": \\"A\\", \\"materia\\": {\\"_id\\": {\\"$oid\\": \\"613d6cfb1d90c02257c7c168\\"}, \\"nomeMateria\\": \\"Projetos Empreendedores 06N\\", \\"professores\\": [\\"613d6de11d90c02257c7c16a\\"]}}, {\\"_id\\": {\\"$oid\\": \\"613d734c1d90c02257c7c17d\\"}, \\"tiaAluno\\": \\"31933130\\", \\"notaA\\": 6, \\"notaB\\": 7, \\"notaC\\": 6, \\"notaD\\": 9, \\"textoContestacao\\": \\"\\", \\"materiaId\\": \\"613d6f361d90c02257c7c170\\", \\"status\\": \\"A\\", \\"materia\\": {\\"_id\\": {\\"$oid\\": \\"613d6f361d90c02257c7c170\\"}, \\"nomeMateria\\": \\"Metodologia de Pesquisa 06N\\", \\"professores\\": [\\"613d6e081d90c02257c7c16b\\"]}}, {\\"_id\\": {\\"$oid\\": \\"613d735a1d90c02257c7c17e\\"}, \\"tiaAluno\\": \\"31933130\\", \\"notaA\\": 10, \\"notaB\\": 7, \\"notaC\\": 6, \\"notaD\\": 9, \\"textoContestacao\\": \\"\\", \\"materiaId\\": \\"613d6f8c1d90c02257c7c172\\", \\"status\\": \\"A\\", \\"materia\\": {\\"_id\\": {\\"$oid\\": \\"613d6f8c1d90c02257c7c172\\"}, \\"nomeMateria\\": \\"Interacao Humano Computador 06N\\", \\"professores\\": [{\\"$oid\\": \\"613d6e411d90c02257c7c16c\\"}]}}, {\\"_id\\": {\\"$oid\\": \\"613d736a1d90c02257c7c17f\\"}, \\"tiaAluno\\": \\"31933130\\", \\"notaA\\": 5, \\"notaB\\": 7, \\"notaC\\": 6, \\"notaD\\": 7, \\"textoContestacao\\": \\"\\", \\"materiaId\\": \\"613d6fef1d90c02257c7c174\\", \\"status\\": \\"A\\", \\"materia\\": {\\"_id\\": {\\"$oid\\": \\"613d6fef1d90c02257c7c174\\"}, \\"nomeMateria\\": \\"Computa\\\\u00e7\\\\u00e3o distribuida 6N\\", \\"professores\\": [\\"613d6e651d90c02257c7c16d\\"]}}, {\\"_id\\": {\\"$oid\\": \\"613d737e1d90c02257c7c180\\"}, \\"tiaAluno\\": \\"31933130\\", \\"notaA\\": 8, \\"notaB\\": 9, \\"notaC\\": 6, \\"notaD\\": 7, \\"textoContestacao\\": \\"\\", \\"materiaId\\": \\"613d70241d90c02257c7c177\\", \\"status\\": \\"A\\", \\"materia\\": {\\"_id\\": {\\"$oid\\": \\"613d70241d90c02257c7c177\\"}, \\"nomeMateria\\": \\"Computa\\\\u00e7\\\\u00e3o distribuida 6N11\\", \\"professores\\": [\\"613d6e651d90c02257c7c16d\\"]}}, {\\"_id\\": {\\"$oid\\": \\"613d73901d90c02257c7c181\\"}, \\"tiaAluno\\": \\"31933130\\", \\"notaA\\": 6, \\"notaB\\": 5, \\"notaC\\": 6, \\"notaD\\": 7, \\"textoContestacao\\": \\"\\", \\"materiaId\\": \\"613d70481d90c02257c7c178\\", \\"status\\": \\"A\\", \\"materia\\": {\\"_id\\": {\\"$oid\\": \\"613d70481d90c02257c7c178\\"}, \\"nomeMateria\\": \\"Compiladores 6N\\", \\"professores\\": [\\"613d6e931d90c02257c7c16e\\"]}}]"\n'

    assert expected == res.get_data(as_text=True)